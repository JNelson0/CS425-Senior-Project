{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useCallback, useState } from \"react\";\nimport { useSWRConfig } from \"swr\";\nimport jsonResponseFetcher from \"./jsonResponseFetcher\";\n\nconst usePostRequest = (pathname, keyFn) => {\n  _s();\n\n  const {\n    mutate\n  } = useSWRConfig();\n  const [data, setData] = useState();\n  const [error, setError] = useState();\n  const [loading, setLoading] = useState(false);\n  const request = useCallback(body => {\n    setLoading(true);\n    setData(undefined);\n    setError(undefined); //Sends request to db, then updates based on userID\n\n    jsonResponseFetcher(pathname, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(body)\n    }).then(data => {\n      setData(data);\n      mutate(keyFn(data), data, false);\n    }).catch(setError).finally(() => setLoading(false));\n  }, [pathname, keyFn, mutate]);\n  return {\n    request,\n    data,\n    error,\n    loading\n  };\n};\n\n_s(usePostRequest, \"s+9AFkYKHUwAe+ceNIDZJry4HyM=\", false, function () {\n  return [useSWRConfig];\n});\n\nexport default usePostRequest;","map":{"version":3,"sources":["/Users/charlespezeshki/Documents/GitHub/CS425-Senior-Project/client/src/hooks/swr/usePostRequest.js"],"names":["useCallback","useState","useSWRConfig","jsonResponseFetcher","usePostRequest","pathname","keyFn","mutate","data","setData","error","setError","loading","setLoading","request","body","undefined","method","headers","JSON","stringify","then","catch","finally"],"mappings":";;AAAA,SAAQA,WAAR,EAAqBC,QAArB,QAAoC,OAApC;AACA,SAAQC,YAAR,QAA2B,KAA3B;AACA,OAAOC,mBAAP,MAAgC,uBAAhC;;AAEA,MAAMC,cAAc,GAAG,CAACC,QAAD,EAAWC,KAAX,KAAqB;AAAA;;AAC1C,QAAM;AAACC,IAAAA;AAAD,MAAWL,YAAY,EAA7B;AAEA,QAAM,CAACM,IAAD,EAAOC,OAAP,IAAkBR,QAAQ,EAAhC;AACA,QAAM,CAACS,KAAD,EAAQC,QAAR,IAAoBV,QAAQ,EAAlC;AACA,QAAM,CAACW,OAAD,EAAUC,UAAV,IAAwBZ,QAAQ,CAAC,KAAD,CAAtC;AAEA,QAAMa,OAAO,GAAGd,WAAW,CACzBe,IAAI,IAAI;AACNF,IAAAA,UAAU,CAAC,IAAD,CAAV;AACAJ,IAAAA,OAAO,CAACO,SAAD,CAAP;AACAL,IAAAA,QAAQ,CAACK,SAAD,CAAR,CAHM,CAKN;;AACAb,IAAAA,mBAAmB,CAACE,QAAD,EAAW;AAC5BY,MAAAA,MAAM,EAAE,MADoB;AAE5BC,MAAAA,OAAO,EAAE;AAAC,wBAAgB;AAAjB,OAFmB;AAG5BH,MAAAA,IAAI,EAAEI,IAAI,CAACC,SAAL,CAAeL,IAAf;AAHsB,KAAX,CAAnB,CAKGM,IALH,CAKQb,IAAI,IAAI;AACZC,MAAAA,OAAO,CAACD,IAAD,CAAP;AACAD,MAAAA,MAAM,CAACD,KAAK,CAACE,IAAD,CAAN,EAAcA,IAAd,EAAoB,KAApB,CAAN;AACD,KARH,EASGc,KATH,CASSX,QATT,EAUGY,OAVH,CAUW,MAAMV,UAAU,CAAC,KAAD,CAV3B;AAWD,GAlBwB,EAmBzB,CAACR,QAAD,EAAWC,KAAX,EAAkBC,MAAlB,CAnByB,CAA3B;AAsBA,SAAO;AACLO,IAAAA,OADK;AAELN,IAAAA,IAFK;AAGLE,IAAAA,KAHK;AAILE,IAAAA;AAJK,GAAP;AAMD,CAnCD;;GAAMR,c;UACaF,Y;;;AAoCnB,eAAeE,cAAf","sourcesContent":["import {useCallback, useState} from \"react\"\nimport {useSWRConfig} from \"swr\"\nimport jsonResponseFetcher from \"./jsonResponseFetcher\"\n\nconst usePostRequest = (pathname, keyFn) => {\n  const {mutate} = useSWRConfig()\n\n  const [data, setData] = useState()\n  const [error, setError] = useState()\n  const [loading, setLoading] = useState(false)\n\n  const request = useCallback(\n    body => {\n      setLoading(true)\n      setData(undefined)\n      setError(undefined)\n\n      //Sends request to db, then updates based on userID\n      jsonResponseFetcher(pathname, {\n        method: \"POST\",\n        headers: {\"Content-Type\": \"application/json\"},\n        body: JSON.stringify(body),\n      })\n        .then(data => {\n          setData(data)\n          mutate(keyFn(data), data, false)\n        })\n        .catch(setError)\n        .finally(() => setLoading(false))\n    },\n    [pathname, keyFn, mutate],\n  )\n\n  return {\n    request,\n    data,\n    error,\n    loading,\n  }\n}\n\nexport default usePostRequest\n"]},"metadata":{},"sourceType":"module"}